# 自作 会話支援AIツール 要件定義書

## 1. 背景・目的

ビジネスチャットでの自然なやり取りを支援するため、ユーザーと他者とのチャット履歴を基にAIが返信候補を生成・修正するツールを開発する。Microsoft Teams等の外部サービスに依存せず、自前でセキュアな運用を可能にする。

---

## 2. 利用シーン

- 自社チャットサービスや内部SNSなどでの返信文の作成支援
- ユーザーが自分の下書きをAIにより整形・改善
- 履歴や相手の情報を踏まえた文脈理解に基づく返信支援

---

## 3. 機能要件

| カテゴリ             | 要件概要                                                                 |
|----------------------|--------------------------------------------------------------------------|
| チャット履歴の読み込み  | ユーザーの過去のやり取りを一時的にJSONアップロードなどで取得                         |
| 相手情報の手動入力      | 名前・部署・役職などをUI上で手動入力、またはCSV/JSONアップロード                      |
| 返信候補生成          | 履歴＋相手情報＋プロンプトに基づいてAIが候補文を生成                                 |
| 文脈修正機能          | ユーザーが入力した下書き文に対してAIが言い換え、敬語化、要約などを提案                   |
| 候補の送信欄連携       | AIが生成した文を送信欄に貼り付ける（ユーザー確認後にコピーボタンなどで操作）             |
| 履歴の一時保存         | クライアントメモリまたはローカルストレージにてセッション中のみ履歴を保持                 |

---

## 4. UI/UX要件

| 画面構成              | 要件概要                                                                   |
|-----------------------|----------------------------------------------------------------------------|
| 左：チャット履歴表示欄     | 過去ログや現在の相手とのやり取りを時系列で表示（読み込み or ペースト形式）                  |
| 中央：入力＋AI候補欄     | 下書き入力＋返信候補の生成・修正ボタンを配置（ワンクリックで送信欄に反映）                    |
| 右：候補文編集欄         | AIが生成した文を手動編集できるテキストボックスを配置                                    |
| モード切替             | 「1から生成」「文脈修正」「要約」「敬語変換」などをラジオボタンやセレクトで選択可             |

---

## 5. 非機能要件

- **セキュリティ**：チャット内容を外部DBやサーバーに保存しない構成（セッション完了で破棄）
- **プライバシー**：履歴や相手情報をユーザー手元でのみ扱う（ローカルストレージ、IndexedDBなど）
- **レスポンス性能**：候補生成まで2秒以内（キャッシュやストリーミング生成も検討）
- **アクセシビリティ**：キーボード操作・ダークモード・フォントサイズ調整対応

---

## 6. 技術構成

| 要素               | 詳細内容                                                                  |
|--------------------|---------------------------------------------------------------------------|
| フロントエンド         | React / Vue.js（SPAs）＋Tailwind CSSなど                                |
| バックエンド（必要な場合） | Python（FastAPI） / Node.js（Express）でLLM呼び出し・セッション制御            |
| LLM               | OpenAI API（GPT-4など）またはローカルLLM（BGE、LLaMA2 + Ollamaなど）         |
| 履歴保存方法          | クライアント内メモリ、一時ファイル、IndexedDB、ブラウザキャッシュなど（DB不使用）   |
| デプロイ           | 自社クラウド、ローカルイントラ内、Electronアプリ化など環境に応じて選択               |

---

## 7. セキュリティと運用方針

- 履歴や個人情報を**サーバー側に一切保存しない**
- セッション中のみデータ保持。終了時に自動消去
- クライアント内処理が基本、必要時のみ安全なAPI経由で処理
- OpenAI等を使用する場合はプロキシでトークン管理し、ログ送信を制御

---

## 8. 今後の検討項目

- ログイン・ユーザー認証機構の導入（SSO連携含む）
- 送信テンプレートの保存・共有機能（オン/オフ選択可）
- プロンプトカスタマイズのGUI設定
- モバイル対応 / PWA化 / オフラインモードの対応

---

## 9. 備考

- OpenAIなど外部API使用時には各社利用規約への準拠が必要

